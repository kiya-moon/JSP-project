# HappyEver ì—¬í–‰í”Œë˜ë„ˆâœˆï¸
> ### í”„ë¡œì íŠ¸ ê¸°ê°„
> 2022ë…„ 5ì›” 17ì¼ ~ 2022ë…„ 7ì›” 1ì¼(6ì£¼)
> ### ì°¸ì—¬ ì¸ì›
> 7ëª…
> ### ì—­í• 
> ì¡°ì›
> ### íŒŒíŠ¸
> ë©”ì¸í˜ì´ì§€ ë° ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°(ì´ë©”ì¼ ì„ì‹œë¹„ë°€ë²ˆí˜¸ ë°œì†¡), ì´ê´„ ì·¨í•©, PPT ì œì‘
> ### ê¸°ìˆ  ìŠ¤íƒ
> JSP, JAVA 8, ApacheTomcat 8.5v, Oracle DB, HTML5 & CSS3, JavaScript & JQuery, JSON, MyBatis, ì¹´ì¹´ì˜¤ì§€ë„API & í•œêµ­ê´€ê´‘ê³µì‚¬ Tour API

<br><br></br>

## 1. ê°œìš”ğŸ“Œ
![image](https://user-images.githubusercontent.com/101784768/181612074-573dc3ff-263d-4f6d-be04-7bbe8b70e1e5.png)

</br></br></br>

## 2. í™”ë©´ êµ¬í˜„ ë° ERDâš’ï¸
![image](https://user-images.githubusercontent.com/101784768/181613599-5e534eb5-93d8-426d-ac33-a1eb5398d517.png)
![image](https://user-images.githubusercontent.com/101784768/181614439-50ef383b-e488-4d84-bf7a-5e9bd575b64e.png)

</br></br></br>

## 3. ì£¼ìš” í˜ì´ì§€âœ¨
> ### ë©”ì¸í˜ì´ì§€
> ëª¨ë“  í˜ì´ì§€ì— í—¤ë”ì™€ í‘¸í„° ì—°ê²°</br>
> ë¡œê·¸ì¸ ì‹œ JSTL ì¡°ê±´ë¬¸ì„ í†µí•´ USERNAMEì„ ë°›ì•„ í‘œì‹œí•œë‹¤.</br>
> ê²€ìƒ‰ì°½ì— ì…ë ¥ ì‹œ ì‹¤ì‹œê°„ìœ¼ë¡œ í•´ë‹¹ ê¸€ìê°€ í¬í•¨ëœ ì—¬í–‰ì§€ê°€ ì¦‰ê°ì ìœ¼ë¡œ ê²€ìƒ‰ëœë‹¤.</br>
> ë¹„ë¡œê·¸ì¸ ì‹œ í”Œë˜ë„ˆ ì‘ì„± ê¸°ëŠ¥ ì œí•œ</br></br>
![image](https://user-images.githubusercontent.com/101784768/181620845-091c1eb8-8aef-434a-8d61-5a98c3a073ae.png)
![image](https://user-images.githubusercontent.com/101784768/181621042-50137df5-e6eb-4fd1-ae23-bdc3bd76702e.png)

</br></br>

> ### ë¡œê·¸ì¸ & ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° í˜ì´ì§€
> í—¤ë”ì—ì„œ ëª¨ë‹¬ì°½ìœ¼ë¡œ ë¡œê·¸ì¸ í˜ì´ì§€ êµ¬í˜„</br>
> ë¡œê·¸ì¸ ì„±ê³µ ì‹œ sessionì— ì •ë³´ ì €ì¥</br>
> ì‹¤íŒ¨ í˜¹ì€ validation ì²´í¬ í†µê³¼ ëª»í•  ì‹œ ì•ˆë‚´ë¬¸êµ¬ ë˜ëŠ” alert ì°½ìœ¼ë¡œ ì²˜ë¦¬</br>
> ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° ì§„í–‰ ì‹œ, DBì— ì €ì¥ëœ ì´ë©”ì¼ê³¼ ì´ë¦„ì„ í†µí•´ ê²€ì‚¬ ì§„í–‰</br>
> ì´ë©”ì¼ê³¼ ì´ë¦„ì´ ì €ì¥ë˜ì–´ ìˆë‹¤ë©´, ì„ì‹œë¹„ë°€ë²ˆí˜¸ë¥¼ ì´ë©”ì¼ë¡œ ë°œì†¡í•˜ë©´ì„œ DBì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ UPDATE í•œë‹¤.</br></br>
![image](https://user-images.githubusercontent.com/101784768/181622478-b6beb130-295a-4a08-bab2-21d6491f02d3.png)
![image](https://user-images.githubusercontent.com/101784768/181622601-201b8a2d-1271-400d-a68e-97079099bf54.png)

</br></br>

> ### ì—¬í–‰ í”Œë˜ë„ˆ í˜ì´ì§€
> ë©”ì¸í˜ì´ì§€ì—ì„œ ì„ íƒí•œ ì—¬í–‰ì§€ë¥¼ ì§€ë„ APIì— ë„ìš°ê³ , í•œêµ­ê´€ê´‘ê³µì‚¬ APIë¥¼ í†µí•´ ê°€ì ¸ì˜¨ ì¶”ì²œ ì—¬í–‰ì§€ë¥¼ ëª©ë¡ ë° ì§€ë„ ìœ„ì— ë³´ì—¬ì¤€ë‹¤.</br>
> ì—¬í–‰ ë‚ ì§œ ì…ë ¥ ì‹œ ì¼ìˆ˜ ë§Œí¼ ì¢Œì¸¡ì— DAYê°€ ìƒì„±ë˜ê³ , DAYë§ˆë‹¤ ì—¬í–‰ì§€ ì„¤ì •ì´ ê°€ëŠ¥í•˜ë‹¤.</br>
> ê° DAYëŠ” ì„œë¡œ ë…ë¦½ì ì´ë‹¤.</br></br>
![image](https://user-images.githubusercontent.com/101784768/181623081-192d6e1e-62ed-4256-bdbe-626481e96a4d.png)

</br></br>

> ### ê²Œì‹œíŒ í˜ì´ì§€
> ì—¬í–‰ í”Œë˜ë„ˆ í˜ì´ì§€ì—ì„œ ìƒì„±ëœ í”Œë˜ë„ˆë¥¼ ë³¼ ìˆ˜ ìˆëŠ” ê²Œì‹œíŒì´ë‹¤.</br>
> ì—¬í–‰ í‚¤ì›Œë“œë¥¼ í´ë¦­í•˜ê±°ë‚˜ ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ë©´ ë™ì ìœ¼ë¡œ ë³€í•˜ë„ë¡ ê²€ìƒ‰ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ë‹¤.</br></br>
![image](https://user-images.githubusercontent.com/101784768/181625145-db485479-f58d-4b98-99b0-3b0b025e375d.png)

</br></br></br>

## 4. í•µì‹¬ ì½”ë“œğŸ¯
> ### ì„ì‹œë¹„ë°€ë²ˆí˜¸ ì´ë©”ì¼ ì „ì†¡ ë° DB UPDATE í•˜ê¸°
> ë„¤ì´ë²„ ë©”ì¼ì˜ POP3/SMTP í”„ë¡œí† ì½œì„ ì´ìš©í•´ ì„ì‹œë¹„ë°€ë²ˆí˜¸ë¥¼ ì ì€ ë©”ì¼ì„ ë°œì†¡í•œë‹¤.</br>
> ì„ì‹œë¹„ë°€ë²ˆí˜¸ ìƒì„±ê¸°ë¥¼ í†µí•´ ëœë¤ìœ¼ë¡œ ìƒì„±ëœ ë¹„ë°€ë²ˆí˜¸ëŠ” DBì— UPDATE ëœë‹¤.</br></br>
> FindPwSendEmail.java
```java
package com.happy.app.login;

import java.io.IOException;
import java.io.PrintWriter;
import java.util.Properties;
import java.util.Random;

import javax.mail.Message;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import com.happy.app.action.Action;
import com.happy.app.action.ActionForward;
import com.happy.app.dao.LoginDAO;

public class FindPwSendEmail implements Action {

	@Override
	public ActionForward execute(HttpServletRequest req, HttpServletResponse resp) {
		ActionForward forward = new ActionForward();
		LoginDAO ldao = new LoginDAO();
		
		String email = req.getParameter("email");
		String name = req.getParameter("name");
		
		// mail server ì„¤ì •
		String host = "smtp.naver.com";
		String user = "anelune@naver.com"; // ìì‹ ì˜ ë„¤ì´ë²„ ê³„ì •
		String password = "fkspwbdkspfns";// ìì‹ ì˜ ë„¤ì´ë²„ íŒ¨ìŠ¤ì›Œë“œ

		// ë©”ì¼ ë°›ì„ ì£¼ì†Œ
		String to_email = ldao.checkEmail(email, name);

		// SMTP ì„œë²„ ì •ë³´ë¥¼ ì„¤ì •í•œë‹¤.
		Properties props = new Properties();
		props.put("mail.smtp.host", host);
		props.put("mail.smtp.port", 465);
		props.put("mail.smtp.auth", "true");
		props.put("mail.smtp.starttls.enable", "true");
		props.put("mail.smtp.ssl.enable", "true");
		props.put("mail.smtp.ssl.protocols", "TLSv1.2");

		// ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ ìƒì„±ê¸°
		StringBuffer temp = new StringBuffer();
		Random rnd = new Random();
		for (int i = 0; i < 10; i++) {
			int rIndex = rnd.nextInt(3);
			switch (rIndex) {
			case 0:
				// a-z
				temp.append((char) ((int) (rnd.nextInt(26)) + 97));
				break;
			case 1:
				// A-Z
				temp.append((char) ((int) (rnd.nextInt(26)) + 65));
				break;
			case 2:
				// 0-9
				temp.append((rnd.nextInt(10)));
				break;
			}
		}
		String AuthenticationKey = temp.toString();
		System.out.println(AuthenticationKey);
		
		ldao.updatePw(email, AuthenticationKey);

		Session session = Session.getDefaultInstance(props, new javax.mail.Authenticator() {
			protected PasswordAuthentication getPasswordAuthentication() {
				return new PasswordAuthentication(user, password);
			}
		});
		
		// email ì „ì†¡
		try {
			MimeMessage msg = new MimeMessage(session);
			msg.setFrom(new InternetAddress(user, "HappyEver"));
			
			msg.addRecipient(Message.RecipientType.TO, new InternetAddress(to_email));

			// ë©”ì¼ ì œëª©
			msg.setSubject("ì•ˆë…•í•˜ì„¸ìš” HappyEver ì…ë‹ˆë‹¤.");
			// ë©”ì¼ ë‚´ìš©
			msg.setText("ì„ì‹œë¹„ë°€ ë²ˆí˜¸ëŠ” " + temp + " ì…ë‹ˆë‹¤. \nì„ì‹œë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸ í›„ ê¼­ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë°”ê¿”ì£¼ì„¸ìš”.");

			Transport.send(msg);
			System.out.println("ì´ë©”ì¼ ì „ì†¡");
			
			PrintWriter out = resp.getWriter();
			forward.setPath("/main.jsp?flag=true");
		
		} catch (Exception e) {
			e.printStackTrace();
		}
		
		HttpSession saveKey = req.getSession();
		saveKey.setAttribute("AuthenticationKey", AuthenticationKey);

		return forward;
	}
}
```

</br></br>

> ### í•œêµ­ê´€ê´‘ê³µì‚¬ APIë¥¼ ì´ìš©í•´ ë°›ì•„ì˜¨ JSON í˜•ì‹ì˜ ë°ì´í„°ë¥¼ í…Œì´ë¸”ì— INSERT í•˜ê¸°
> APIë¥¼ í†µí•´ JSON í˜•ì‹ìœ¼ë¡œ ë°›ì•„ì˜¨ ë°ì´í„° ì¤‘ í•„ìš”í•œ ì •ë³´ë¥¼ ì¶”ë ¤ LIST ê°ì²´ì— ë‹´ì•„ Parameterë¡œ ë„˜ê¸´ë‹¤.</br>
> ë„˜ì–´ì˜¨ ë°ì´í„°ë¥¼ DB í…Œì´ë¸”ê³¼ ë™ì¼í•œ ìˆœì„œì™€ íƒ€ì…ìœ¼ë¡œ ì„¸íŒ…í•´ INSERT í•œë‹¤.(MVC2 ë°©ë²• ì‚¬ìš©)</br></br>
> tourist.js
```jQuery
$(function(){
	getJson();
});

// jsonì„ ì½ì–´ì˜¤ëŠ” í•¨ìˆ˜
function getJson() {
	// Seoul.jsonì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´ -> function(data)ë¡œ ì²˜ë¦¬ -> dataì— ì €ì¥
	$.getJSON("areaBasedList.json", function(data) {
		$.each(data, function(key, val) {
			if( key == "SID" ) {
				$("table").attr("border", "1");
				
				// APIì—ì„œ ë°›ì•„ ì˜¬ ë°ì´í„°ë“¤
				$("thead").append(
					"<tr>"+
						"<th>"+val.ADDR1+"</th>"+	
						"<th>"+val.AREACODE+"</th>"+	
						"<th>"+val.SIGUNGUCODE+"</th>"+
						"<th>"+val.FIRSTIMAGE2+"</th>"+	
						"<th>"+val.READCOUNT+"</th>"+	
						"<th>"+val.TITLE+"</th>"+	
					"</tr>"
				);
			} else {
				var list = val;		// list ë³€ìˆ˜ : ë°°ì—´ë¡œ ì •ì˜
				for( var i=0; i<list.length; i++ ) {
					var str = list[i];		// str ë³€ìˆ˜ : list ë°°ì—´ ì•ˆì— ìˆëŠ” í•˜ë‚˜ì˜ json ë°ì´í„°
					$("tbody").append(
						"<tr>"+
							"<td>"+str.addr1+"</td>"+
							"<td>"+str.areacode+"</td>"+
							"<td>"+str.sigungucode+"</td>"+
							"<td>"+str.firstimage2+"</td>"+
							"<td>"+str.readcount+"</td>"+
							"<td>"+str.title+"</td>"+
							// dbì— ê°’ë“¤ì„ ';'ë¡œ ë‚˜ëˆ ì„œ ë„˜ê²¨ì¤Œ
							"<input type='hidden' name='list' value='"+
							str.addr1+";"+str.areacode+";"+str.sigungucode+";"
							+str.firstimage2+";"+str.readcount+";"+str.title+"'>"+
						"</tr>"
					);
				}
			}
		});
	});
}
```

</br>

> AddTourlistAction.java
```java
package com.happy.app.action;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.happy.app.action.Action;
import com.happy.app.action.ActionForward;
import com.happy.app.dao.TourlistDAO;
import com.happy.app.dto.TourlistDTO;

public class AddTourlistAction implements Action {

	@Override
	public ActionForward execute(HttpServletRequest req, HttpServletResponse resp) {
		System.out.println("AddTourlistAction ë„ì°©");
		ActionForward forward = new ActionForward();
		TourlistDAO tdao = new TourlistDAO();
		
//		tdao.delete();
		String[] Tourlist = req.getParameterValues("list");
		
		List<TourlistDTO> tdtos = new ArrayList<TourlistDTO>();
		
		for( int i = 0; i < Tourlist.length; i++ ) {
			String[] tmp = Tourlist[i].split(";");
			System.out.println(Arrays.toString(tmp));
			
			TourlistDTO tdto = new TourlistDTO(tmp[0], Integer.parseInt(tmp[1]), 
                                                    Integer.parseInt(tmp[2]), tmp[3], Integer.parseInt(tmp[4]), tmp[5]);
			
			tdtos.add(tdto);
		}
		
		tdao.AddTourlist(tdtos);
		
		forward.setRedirect(true);
		forward.setPath( req.getContextPath() + "/tour/tourlist.jsp");
		
		return forward;
	}
}
```

</br></br></br>

## 5. ì´ìŠˆ ë° íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
> ### ì´ìŠˆ
> ì´ë²ˆ í”„ë¡œì íŠ¸ì˜ ê°€ì¥ í° ì´ìŠˆëŠ” ì‹œê°„ ë¶€ì¡±ì´ì—ˆë‹¤.</br>
> ì—¬í–‰í”Œë˜ë„ˆì˜ ì‘ì„± ë¶€ë¶„ì´ ì´ë²ˆ í”„ë¡œì íŠ¸ì˜ í•µì‹¬ ê¸°ëŠ¥ì´ì—ˆë˜ ë§Œí¼ ë§ì€ ê³µì„ ë“¤ì˜€ë‹¤.</br>
> í•˜ë“œì½”ë”©ì´ ì•„ë‹Œ ì½”ë”©ì„ í•˜ë ¤ê³  ë…¸ë ¥í–ˆì—ˆê³ , ë ˆí¼ëŸ°ìŠ¤ë¡œ ì‚¼ì•˜ë˜ í™ˆí˜ì´ì§€ì˜ ê¸°ëŠ¥ì„ ìµœëŒ€í•œ êµ¬í˜„í•˜ê³ ì í–ˆë‹¤.</br>
> í•˜ì§€ë§Œ ê³µê³µ APIì˜ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ì™€ ì¶œë ¥í•˜ëŠ” ê¸°ëŠ¥, ì§€ë„ APIì— ê´€ê´‘ì§€ë¥¼ ëª¨ë‘ í‘œì‹œí•˜ëŠ” ê¸°ëŠ¥ ë“± ê¹Œë‹¤ë¡œìš´ ë¶€ë¶„ì´ ë§ì•˜ê³ </br>
> ì„ íƒí•œ ì—¬í–‰ì§€ë“¤ì„ DBì— ë‹¤ì‹œ ì €ì¥í•˜ëŠ” ê²ƒ ì—­ì‹œ ì‰½ì§€ ì•Šì•˜ë‹¤.</br>
> ë•Œë¬¸ì— í”„ë¡œì íŠ¸ ë°œí‘œ ì§ì „ê¹Œì§€ ìˆ˜ì •ì— ìˆ˜ì •ì„ ê±°ë“­í•´ì•¼ í–ˆë‹¤.</br>
> ì´ ì´ìŠˆë¥¼ ê²ªìœ¼ë©´ì„œ, í”„ë¡œì íŠ¸ì— ìˆì–´ ë¬´ì—‡ë³´ë‹¤ ì¤‘ìš”í•œ ê²ƒì€ ì™„ì„±ì´ë¼ëŠ” ê²ƒì„ ëŠê¼ˆë‹¤.</br>
> ì‚¬íšŒìƒí™œ ê²½í—˜ì„ ëŒì´ì¼œë³´ë©´, ë¹„ì¦ˆë‹ˆìŠ¤ì—ëŠ” ê¸°í•œì´ ì •í•´ì ¸ ìˆê³  ê·¸ ì‹œê°„ ì•ˆì— ì™„ì„±ë„ ë†’ì€ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•´ì•¼ í–ˆë‹¤.</br>
> í”„ë¡œì íŠ¸ ì—­ì‹œ í•˜ë“œì½”ë”©ì„ í•˜ë”ë¼ë„ ìµœëŒ€í•œ ì™„ì„±ë„ë¥¼ ë†’ì´ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ì§€ ì•Šì•˜ì„ê¹Œ ì‹¶ë‹¤.</br>

</br>

> ### íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
> ì„ì‹œë¹„ë°€ë²ˆí˜¸ë¥¼ ì´ë©”ì¼ë¡œ ë°œì†¡í•˜ëŠ” ê²ƒì€ ë³´ë‹¤ ì™„ì„±ë„ ë†’ì€ í™ˆí˜ì´ì§€ë¥¼ ìœ„í•œ ë„ì „ì´ì—ˆë‹¤.</br>
> ì²˜ìŒ ì ‘í•˜ëŠ” í”„ë¡œí† ì½œë“¤ì— ëˆˆì´ ë±…ê¸€ë±…ê¸€ ëŒì•˜ë‹¤.</br>
> ì¸í„°ë„·ì„ ë’¤ì ¸ ê°€ì¥ ê¸°ëŠ¥í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¥¼ í´ë¡ ì½”ë”©í–ˆì§€ë§Œ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•Šì•˜ë‹¤.</br>
> ì½”ë“œë¥¼ ìˆ˜ì •í•˜ë©´ ë‹¤ë¥¸ ì—ëŸ¬ê°€ ëœ¨ê³  ë˜ ë‹¤ì‹œ ë‹¤ë¥¸ ì—ëŸ¬ê°€ ëœ¨ëŠ” ê³¼ì •ì´ ë°˜ë³µëë‹¤.</br>
> ë°©í™”ë²½ì„ ì—´ê³  í”„ë¡œí† ì½œì„ ë“±ë¡í•˜ê¸°ë„ í•˜ê³ , IMAP í”„ë¡œí† ì½œì„ ê°€ì ¸ë‹¤ ì¼ë‹¤ê°€ ë‹¤ì‹œ POP3ë¡œ ëŒì•„ì˜¤ê¸°ë„ í–ˆë‹¤.</br>
> ìµœì¢…ì ìœ¼ë¡œ SSLì˜ TLS ë²„ì „ì„ ìˆ˜ì •í•´ì£¼ê³ ì„œì•¼ ë©”ì¼ì´ ë°œì†¡ë˜ì—ˆë‹¤ğŸ‰ğŸ‰ğŸ‰</br>

</br></br></br>

## 6. í•œì¤„í‰
> ### í•´í”¼í•˜ì§€ë§Œ ì•„ì‰¬ì› ë˜ í”„ë¡œì íŠ¸
> 7ëª…ì´ë¼ëŠ” ë§ì€ ì‚¬ëŒë“¤ì´ ëª¨ì¸ ê²ƒì¹˜ê³ ëŠ” HappyHajoë¼ëŠ” ì¡°ì´ë¦„ì²˜ëŸ¼ í•´í”¼í•˜ê²Œ ì§„í–‰ë˜ì—ˆë˜ í”„ë¡œì íŠ¸ì˜€ë‹¤.</br>
> í•˜ì§€ë§Œ êµ¬í˜„í•˜ì§€ ëª»í•œ ê¸°ëŠ¥ë“¤ì´ ìˆì–´ ì•„ì‰¬ì›€ì´ ë§ì´ ë‚¨ëŠ”ë‹¤. </br>
